@using SkipperModels.Entities
@using SkipperModels.Models
@using SkipperModels.InputModels
@using Microsoft.AspNetCore.Components.Forms

@typeparam TModel where TModel : class, Models.Shared.Models.IModel, new()
@typeparam TInputModel where TInputModel : class, Models.Shared.InputModels.IInputModel, new()
@typeparam TClient where TClient : Web.Shared.ApiClients.ModelClient<TModel, TClientConfig>
@typeparam TClientConfig where TClientConfig : Web.Shared.ApiClients.ModelClientConfig
@typeparam TConverter where TConverter : Models.Shared.Converters.IModelToInputConverter<TModel, TInputModel>

<MudContainer Class="pa-5">
    <EditForm Model="Input" method="post" OnValidSubmit="Post" FormName="new-entry">
        <DataAnnotationsValidator/>
        <MudCard Class="rounded-tb-xl">
            <MudCardHeader Class="mud-theme-primary">
                <MudText Typo="Typo.h5" Align="Align.Center">
                    <MudStack Row AlignItems="AlignItems.Center">
                        <MudIcon Icon="@Icons.Material.Outlined.AddCircleOutline"/>
                        New @ModelDisplayName
                    </MudStack>
                </MudText>
            </MudCardHeader>
            <MudCardContent>
                @ChildContent(Input)
            </MudCardContent>
            <MudCardActions Class="pa-4">
                <MudButton Href="@($"/{PageRoute}")" StartIcon="@Icons.Material.Outlined.ArrowBack" Color="Color.Secondary"
                           Variant="Variant.Filled">Back to entries
                </MudButton>
                <MudSpacer/>
                <MudButton ButtonType="ButtonType.Submit" StartIcon="@Icons.Material.Outlined.Save"
                           Color="Color.Primary" Variant="Variant.Filled">Save @ModelDisplayName
                </MudButton>
            </MudCardActions>
        </MudCard>
        <MudSpacer/>
        <MudPaper Class="my-2">
            <ValidationSummary class="mx-2 pa-5"/>
        </MudPaper>
    </EditForm>
</MudContainer>